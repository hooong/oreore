{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
	<!-- Remember to include jQuery :) -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

	<!-- jQuery Modal -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />


	<title></title>
	<link rel="stylesheet" href="{% static 'index/index.css' %}">
	<script src="https://code.jquery.com/jquery-3.4.1.js"
	integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
	crossorigin="anonymous"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://kit.fontawesome.com/4487a79980.js" crossorigin="anonymous"></script>
	<link rel="shortcut icon" href="./icon.ico">
  
	<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>
	
	<style>

.typing-txt{display: none;}
.typeing-txt ul{list-style:none;}
.typing {  
  display: inline-block; 
  animation-name: cursor; 
  animation-duration: 0.3s; 
  animation-iteration-count: infinite; 
} 
@keyframes cursor{ 
  0%{border-right: 1px solid #fff} 
  50%{border-right: 1px solid #000} 
  100%{border-right: 1px solid #fff} 
}
	</style>
</head>
<body>
<div class="mainContainer">
	<h1 style="font-family: 'S-CoreDream-8Heavy'; color:#f3eadd">OREORE</h1>
	<div class="main">
		<div id="toggle1">
			<form action="" method="get">
				
					
				
					<div class="toggleSearch" onclick="toggleSearch(2)">의약품 검색 ></div>
					<input class="searchBox" type="text" name="q" placeholder="질병분류기호 검색" value="{{ q }}">
				
						<button class="sbtn" value=""><svg width="17px" aria-hidden="true" focusable="false" data-prefix="fas" style="color:white;" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></button>
						
			</form>
		</div>
		<div id="toggle2">
				<div class="toggleSearch" onclick="toggleSearch(1)">질병분류기호 검색 ></div>
			<input class="searchBox" id="searchBox_medi" type="text" name="medi" placeholder="의약품 검색" value=''>
			<button class="sbtn" id="medi_button" value="" onclick="medi_search();"><svg width="17px" aria-hidden="true" focusable="false" data-prefix="fas" style="color:white;" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></button>
		</div>

			<!-- 의약품 검색 -->
	
			<div id="info_medi">
				<!-- 여기에 의약품 띄워주기 -->
			</div>
			<div id="info_disease">
			{% for cd, nm in sick %}
			{%if cd == '첫화면' %}
			<div style="margin:10px;">
				
					<div class="typing-txt" >
							<ul>
									
								<li>J04</li>
								<li>감기</li>
								<li>치주염</li>
						</ul>
						
						</div> 
						검색창에 궁금한 질병코드나 명칭을 입력해보세요!<br>
						<div style="height:40px;">
						<p class="typing"></p>
						</div> 
						<hr style="width:70px">
  

			</div>
			{% elif cd == "검색 내용 없음" %}
				<p>검색내용없음</p>
			{%else%}
			<div class="prescriptionList">

				<div style="padding:8px;text-align: left;font-size:10pt;color:gray;">{{cd}}</div>
				<a href="{% url 'detail_search' code=cd %}" rel="modal:open">
				<div style="display:flex;">
					<div style="flex:1 1;white-space:nowrap; padding:8px;text-align:left;overflow:hidden;text-overflow: ellipsis ">
						{{nm}}
					</div>
					<div style="flex:0 0;flex-basis:20px;padding:10px 0;">
						<svg style="width:10px; color:gray"aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg>
					</div>
				</div></a>
				<hr style="border: 0.5px solid rgb(204, 204, 204);width:95%">
			</div>
			{%endif%}
				{% endfor %}
			</div>
		</div>

	<div id="tail">Copyrightⓒ2019 by OREORE | Contact Us </div>
  </div>
	<div id="menuContainer">
		<div id="menuElementsHome">
		  <div>
			<svg style="width:30px;height:25px;color:white;" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" class="svg-inline--fa fa-home fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
			  <path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path>
			</svg>
		  </div>
		  <span>Home</span>
		</div>
		<div onclick="location.href='prescription/all'" id="menuElementsMypage">
		  <div>
	  <svg style="color:white; width:23px;"aria-hidden="true" focusable="false" data-prefix="far" data-icon="clipboard" class="svg-inline--fa fa-clipboard fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm144 418c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V118c0-3.3 2.7-6 6-6h42v36c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-36h42c3.3 0 6 2.7 6 6z"></path>
	  </svg>
		  </div>
		  <span >Mypage</span>
		</div>
		<div id="menuElementsSearch">
		  <div>
			<svg width="25px" aria-hidden="true" focusable="false" data-prefix="fas" style="color:white;" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
			  <path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path>
			</svg>
		  </div>
		  <span>Search</span>
		</div>
</div>
<script>
		$( document ).ready( function() {
 var jbOffset = $( '#menuContainer' ).offset();
	 $( '#menuContainer' ).addClass( 'jbFixed' )

 $( window ).scroll( function() {
 var scrollBottom = $(window).scrollTop() + $(window).height();

		if(scrollBottom > jbOffset.top ) {
	 $( '#menuContainer' ).removeClass( 'jbFixed' );
	 }else{
	 $( '#menuContainer' ).addClass( 'jbFixed' )
	 }
	 
 });
 } );
 var typingBool = false; 
var typingIdx=0; 
var liIndex = 0;
var liLength = $(".typing-txt>ul>li").length;

// 타이핑될 텍스트를 가져온다 
var typingTxt = $(".typing-txt>ul>li").eq(liIndex).text(); 
typingTxt=typingTxt.split(""); // 한글자씩 자른다. 
if(typingBool==false){ // 타이핑이 진행되지 않았다면 
 typingBool=true; 
 var tyInt = setInterval(typing,100); // 반복동작 
} 
	
function typing(){ 
if(typingIdx<typingTxt.length){ // 타이핑될 텍스트 길이만큼 반복 
	$(".typing").append(typingTxt[typingIdx]); // 한글자씩 이어준다. 
	typingIdx++; 
} else{ //한문장이끝나면
	//다음문장으로.. 마지막문장이면 다시 첫번째 문장으로 
	if(liIndex>=liLength-1){
		liIndex=0;
	}else{
		liIndex++; 
	}
	
	//다음문장을 타이핑하기위한 셋팅
		 typingIdx=0;
		 typingBool = false; 
		 typingTxt = $(".typing-txt>ul>li").eq(liIndex).text(); 
		
	//다음문장 타이핑전 1초 쉰다
			clearInterval(tyInt);
			setTimeout(function(){
				$(".typing").html('');
				tyInt = setInterval(typing,100);
			},1000);
 } 
}  
</script>

<!-- 의약품 js -->
<!-- 의약품 ajax ready -->
<script type="text/javascript">
	// 버튼 눌리면 밑에 함수 실행하게하기.
	function medi_search(){
		var medi = $("#searchBox_medi").val();
		$.ajax({
			type: 'POST',
			url: '/medicine/search/',
			data: {mediname:medi},
			dataType: 'json',
			success: function(result){
				// 아직 code로 검색했을때와 형식이 같아지지 않음 ajax를 if로 나눌지 아예 views에서 형실을 맞출지 고민중.
				// 여기서 0~len으로 해서 잘 띄워봅시다. for문 활용!
				if(result== null) $('#info_medi').html('없어요');
				for(n in result) {
					
					if(n==0){
					$('#info_medi').html('<div><img style="width:90%" src=' + result[n]['img'] + '><div>');
					$('#info_medi').append(result[n]['name']);
					}else{
					$('#info_medi').append('<div><img style="width:90%" src=' + result[n]['img'] + '><div>');
					$('#info_medi').append(result[n]['name']);
					}
				}
				// var searchMedi = 1;
				
				// $('#info_medi').html('<div><img style="width:90%" src=' + result['0']['img'] + '><div>');
				// $('#info_medi').append(result['0']['name']);
				
				// while(result[searchMedi]['name'] != ''){
				// $('#info_medi').append('<div><img style="width:90%" src=' + result[searchMedi]['img'] + '><div>');
				// $('#info_medi').append(result[searchMedi]['name']);
				// searchMedi++;
				//}
				
				
				// 
				
			},
			error: function(e) { console.log('error:'+e.status);}
		});
	}




//서치박스 토글
function toggleSearch(n){
		$('#toggle1').toggle();
		$('#toggle2').toggle();
		if (n==1) {
			$('#info_medi').css('display','none');
		}else{
			$('#info_disease').css('display','none');
		}
}
</script>

</body>


